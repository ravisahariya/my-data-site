<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Register + Attendance</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{font-family:Arial;background:#eef;margin:0}
.box{max-width:520px;margin:10px auto;background:#fff;padding:12px;border-radius:10px}
input,select,button{width:100%;padding:8px;margin-top:6px}
button{border:none;color:#fff}
.green{background:#2ecc71}
.blue{background:#1976d2}
.red{background:#e53935}
table{width:100%;border-collapse:collapse;margin-top:10px;font-size:13px}
th,td{border:1px solid #ccc;padding:5px;text-align:center}
</style>
</head>

<body>

<div class="box">
<h3>Register + Attendance</h3>

<select id="month">
  <option>January 2026</option>
  <option>February 2026</option>
</select>

<input type="date" id="date">

<select id="shift">
  <option>Day</option>
  <option>Night</option>
</select>

<select id="status">
  <option>Present</option>
  <option>Absent</option>
</select>

<input type="text" id="post" placeholder="Post (ETP etc)">

<select id="sign">
  <option>Ravi</option>
  <option>Admin</option>
</select>

<input type="color" id="rowColor" value="#ffffff">

<button class="blue" onclick="saveData()">Save</button>

<table>
<thead>
<tr>
<th>Date</th><th>Shift</th><th>Status</th><th>Post</th><th>Sign</th>
</tr>
</thead>
<tbody id="rows"></tbody>
</table>

<button class="red" onclick="logout()">Logout</button>
</div>

<!-- ðŸ”¥ FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyD74zDXGTiNF7ME8gPpc-j0fC9TvtTAMac",
  authDomain: "privatedatasite-91aa0.firebaseapp.com",
  projectId: "privatedatasite-91aa0",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

window.saveData = async function(){
  const data = {
    month: month.value,
    date: date.value,
    shift: shift.value,
    status: status.value,
    post: post.value,
    sign: sign.value,
    rowColor: rowColor.value,
    createdAt: serverTimestamp()
  };

  await addDoc(collection(db,"digital_register"), data);

  // table me dikhane ke liye
  const tr = document.createElement("tr");
  tr.style.background = data.rowColor;
  tr.innerHTML = `
    <td>${data.date}</td>
    <td>${data.shift}</td>
    <td>${data.status}</td>
    <td>${data.post}</td>
    <td>${data.sign}</td>
  `;
  rows.appendChild(tr);

  alert("Data Saved");
};

window.logout = function(){
  location.href = "index.html";
};
</script>

</body>
</html>
