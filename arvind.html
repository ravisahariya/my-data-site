<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<title>Arvind Attendance</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  margin:0;
  min-height:100vh;
  background:#ffebee;
  font-family:Arial;
  display:flex;
  justify-content:center;
}
.card{
  width:95%;
  max-width:420px;
  background:#fff;
  margin:20px;
  padding:15px;
  border-radius:12px;
  box-shadow:0 6px 18px rgba(0,0,0,.2);
}
h2{text-align:center;color:#c62828}
input,select,button{
  width:100%;
  padding:10px;
  margin-top:8px;
}
button{
  background:#c62828;
  color:#fff;
  border:none;
  border-radius:6px;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
  font-size:13px;
}
th,td{
  border:1px solid #ccc;
  padding:6px;
  text-align:center;
}
.del{color:red;cursor:pointer}
.edit{color:green;cursor:pointer}
.footer{margin-top:10px;font-weight:bold}
</style>
</head>
<body>

<div class="card">
<h2>Arvind Attendance</h2>

<input type="month" id="month">
<input type="date" id="date">
<input id="day" readonly placeholder="Day">
<select id="shift">
  <option>Day</option>
  <option>Night</option>
</select>
<select id="post">
  <option>ETP</option>
  <option>COE</option>
  <option>ACL</option>
  <option>CCTV</option>
</select>

<button onclick="save()">Save Entry</button>

<table>
<thead>
<tr>
<th>Date</th><th>Day</th><th>Shift</th><th>Post</th><th>Edit</th><th>Del</th>
</tr>
</thead>
<tbody id="list"></tbody>
</table>

<div class="footer" id="count"></div>

<button onclick="csv()">Download CSV</button>
<button onclick="logout()">Logout</button>
</div>

<script>
if(localStorage.login!=="arvind") location.href="index.html";

let data=JSON.parse(localStorage.arvindData||"[]"),edit=-1;

date.onchange=()=>day.value=
["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][new Date(date.value).getDay()];

function save(){
 let d={date:date.value,day:day.value,shift:shift.value,post:post.value};
 if(edit>-1){data[edit]=d;edit=-1}else data.push(d);
 localStorage.arvindData=JSON.stringify(data);
 render();
}

function render(){
 list.innerHTML=""; let d=0,n=0;
 data.forEach((r,i)=>{
  r.shift==="Day"?d++:n++;
  list.innerHTML+=`
  <tr>
   <td>${r.date}</td><td>${r.day}</td><td>${r.shift}</td><td>${r.post}</td>
   <td class="edit" onclick="ed(${i})">✏️</td>
   <td class="del" onclick="del(${i})">❌</td>
  </tr>`;
 });
 count.innerText=`Day:${d} | Night:${n} | Total:${d+n}`;
}
function ed(i){
 let r=data[i];
 date.value=r.date;day.value=r.day;shift.value=r.shift;post.value=r.post;
 edit=i;
}
function del(i){
 if(confirm("Delete entry?")){
  data.splice(i,1);
  localStorage.arvindData=JSON.stringify(data);
  render();
 }
}
function csv(){
 let c="Date,Day,Shift,Post\n";
 data.forEach(r=>c+=`${r.date},${r.day},${r.shift},${r.post}\n`);
 let a=document.createElement("a");
 a.href=URL.createObjectURL(new Blob([c]));
 a.download="arvind-attendance.csv";a.click();
}
function logout(){localStorage.login="";location.href="index.html";}
render();
</script>
</body>
</html>
