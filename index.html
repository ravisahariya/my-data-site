<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Attendance Firebase</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<style>
body{font-family:Arial;background:#eee;margin:0}
.hidden{display:none}
.box{padding:10px;border-radius:10px;color:#fff;text-align:center}
.green{background:#198754}.orange{background:#fd7e14}.purple{background:#6f42c1}
button{padding:8px 12px;border:none;border-radius:6px}
</style>
</head>
<body>

<!-- LOGIN -->
<div id="login">
  <h2>Login</h2>
  <input id="u" placeholder="Username"><br>
  <input id="p" type="password" placeholder="Password"><br>
  <button onclick="login()">LOGIN</button>
</div>

<!-- MAIN -->
<div id="main" class="hidden">
  <button onclick="logout()" style="background:red;color:#fff">Logout</button>

  <div style="display:flex;gap:10px">
    <div class="box green">Days<br><span id="days">0</span></div>
    <div class="box orange">Hours<br><span id="hours">0</span></div>
    <div class="box purple">Posts<br><span id="posts">0</span></div>
  </div>

  <br>
  <input type="date" id="date">
  <input type="time" id="in">
  <input type="time" id="out">
  <input id="post" placeholder="Post">
  <button onclick="add()">ADD</button>

  <table border="1" width="100%">
    <thead>
      <tr><th>Date</th><th>In</th><th>Out</th><th>Hours</th><th>Post</th><th>Action</th></tr>
    </thead>
    <tbody id="list"></tbody>
  </table>
</div>

<script>
// üî• FIREBASE CONFIG (‡§Ö‡§™‡§®‡§æ ‡§µ‡§æ‡§≤‡§æ ‡§Ø‡§π‡§æ‡§Å ‡§°‡§æ‡§≤‡•á‡§Ç)
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// LOGIN
const USER="9823087", PASS="7284";
function login(){
  if(u.value===USER && p.value===PASS){
    localStorage.setItem("login","yes");
    showMain();
  } else alert("Wrong login");
}
function logout(){
  localStorage.removeItem("login");
  location.reload();
}
function showMain(){
  login.classList.add("hidden");
  main.classList.remove("hidden");
  load();
}

// ADD ENTRY
function add(){
  let d=date.value,i=in.value,o=out.value,pt=post.value;
  if(!d||!pt) return alert("Date & Post required");
  let h=0;
  if(i&&o){
    h=(new Date(d+"T"+o)-new Date(d+"T"+i))/3600000;
    if(h<0)h=0;
  }
  db.collection("attendance").add({
    date:d,in:i,out:o,hours:h.toFixed(2),post:pt
  }).then(load);
}

// LOAD DATA
function load(){
  db.collection("attendance").orderBy("date")
  .onSnapshot(snap=>{
    let html="",hrs=0,posts=new Set(),dates=new Set();
    snap.forEach(doc=>{
      let r=doc.data();
      hrs+=+r.hours;
      posts.add(r.post);
      dates.add(r.date);
      html+=`
      <tr>
        <td>${r.date}</td>
        <td>${r.in}</td>
        <td>${r.out}</td>
        <td>${r.hours}</td>
        <td>${r.post}</td>
        <td><button onclick="del('${doc.id}')">Delete</button></td>
      </tr>`;
    });
    list.innerHTML=html;
    days.innerHTML=dates.size;
    hours.innerHTML=hrs.toFixed(2);
    posts.innerHTML=posts.size;
  });
}
function del(id){
  if(confirm("Delete?")){
    db.collection("attendance").doc(id).delete();
  }
}

// AUTO LOGIN
if(localStorage.getItem("login")==="yes") showMain();
</script>

</body>
</html>
