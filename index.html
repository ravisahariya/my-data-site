<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<title>Attendance Register</title>

<style>

/* ===== BODY FIXED (NO SCROLL) ===== */
body{
  margin:0;
  font-family:Arial;
  background:#f2f2f2;
  height:100vh;
  overflow:hidden;
}

/* ===== CARD CONTAINER ===== */
.app{
  height:100vh;
  display:flex;
  flex-direction:column;
  padding:10px;
}

/* ===== HEADER ===== */
h2{
  text-align:center;
  margin:5px 0 10px;
}

/* ===== FORM ===== */
.form{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:8px;
}

input,select{
  padding:10px;
  font-size:16px;
  border-radius:6px;
  border:1px solid #ccc;
}

button{
  grid-column:span 2;
  padding:12px;
  font-size:18px;
  background:#4CAF50;
  color:white;
  border:none;
  border-radius:6px;
}

/* ===== COLOR PICKERS ===== */
.colors{
  display:flex;
  gap:10px;
  margin-top:8px;
}

.colors label{
  font-size:14px;
}

/* ===== TABLE AREA SCROLL ONLY ===== */
.table-box{
  flex:1;
  overflow-y:auto;
  margin-top:10px;
  background:white;
  border-radius:8px;
}

/* ===== TABLE ===== */
table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}

th,td{
  border:1px solid #ddd;
  padding:8px;
  text-align:center;
}

th{
  position:sticky;
  top:0;
  background:#ffd9d9;
}

.total{
  background:#ffeaa7;
  font-weight:bold;
}

.edit{background:#2196F3;color:white;border:none;padding:5px}
.del{background:#f44336;color:white;border:none;padding:5px}

</style>
</head>


<body>

<div class="app">

<h2>üìã Attendance Register</h2>

<div class="form">
  <input type="date" id="date">
  <input type="time" id="in">

  <input type="time" id="out">

  <select id="post">
    <option>ETP</option>
    <option>BOARD 2</option>
    <option>COE</option>
    <option>ACL</option>
    <option>BEBRIG</option>
  </select>

  <button onclick="save()">SAVE ENTRY</button>
</div>

<div class="colors">
  <label>BG üé® <input type="color" id="bg"></label>
  <label>Font üé® <input type="color" id="font"></label>
</div>

<div class="table-box">

<table id="tbl">
<thead>
<tr>
<th>Date</th>
<th>In</th>
<th>Out</th>
<th>Hr</th>
<th>Post</th>
<th>E</th>
<th>D</th>
</tr>
</thead>

<tbody id="body"></tbody>

<tfoot>
<tr class="total">
<td colspan="3">Grand Total</td>
<td id="total">0</td>
<td colspan="3"></td>
</tr>
</tfoot>

</table>

</div>

</div>



<script>

let editRow=null;

/* ===== SAVE ===== */
function save(){

 let d=date.value;
 let i=in.value;
 let o=out.value;
 let p=post.value;

 if(!d||!i||!o){
   alert("Fill all fields");
   return;
 }

 let h=hours(i,o);

 if(editRow){
   setRow(editRow,d,i,o,h,p);
   editRow=null;
 }
 else{
   let r=body.insertRow();
   setRow(r,d,i,o,h,p);
 }

 totalCalc();
 clear();
}

/* ===== HOURS ===== */
function hours(a,b){
 let x=new Date("2000-01-01 "+a);
 let y=new Date("2000-01-01 "+b);

 if(y<x) y.setDate(y.getDate()+1);

 return ((y-x)/3600000).toFixed(2);
}

/* ===== SET ROW ===== */
function setRow(r,d,i,o,h,p){

 r.innerHTML=
 `<td>${d}</td>
  <td>${i}</td>
  <td>${o}</td>
  <td>${h}</td>
  <td>${p}</td>
  <td><button class="edit" onclick="edit(this)">‚úèÔ∏è</button></td>
  <td><button class="del" onclick="del(this)">‚ùå</button></td>`;

}

/* ===== EDIT ===== */
function edit(b){
 editRow=b.parentNode.parentNode;

 date.value=editRow.cells[0].innerText;
 in.value=editRow.cells[1].innerText;
 out.value=editRow.cells[2].innerText;
 post.value=editRow.cells[4].innerText;
}

/* ===== DELETE ===== */
function del(b){
 b.parentNode.parentNode.remove();
 totalCalc();
}

/* ===== TOTAL ===== */
function totalCalc(){
 let t=0;
 for(let r of body.rows){
  t+=parseFloat(r.cells[3].innerText);
 }
 total.innerText=t.toFixed(2);
}

/* ===== CLEAR ===== */
function clear(){
 date.value="";
 in.value="";
 out.value="";
}

/* ===== COLOR CUSTOM ===== */
bg.oninput=()=> tbl.style.background=bg.value;
font.oninput=()=> tbl.style.color=font.value;

</script>

</body>
</html>
