<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Attendance MASTER</title>

<style>
body{
margin:0;
font-family:Arial;
background:linear-gradient(135deg,#5f6df5,#7b5cff);
height:100vh;
}

/* LOGIN */
#login{
display:flex;
justify-content:center;
align-items:center;
height:100vh;
}

.card{
background:#fff;
width:95%;
max-width:450px;
padding:40px;
border-radius:18px;
text-align:center;
box-shadow:0 15px 40px rgba(0,0,0,.3);
}

.card input{
width:100%;
padding:14px;
margin:10px 0;
font-size:18px;
}

.card button{
padding:12px 30px;
font-size:18px;
cursor:pointer;
}

/* DASHBOARD */
#app{
display:none;
height:100vh;
flex-direction:column;
}

header{
background:#222;
color:#fff;
padding:10px;
display:flex;
justify-content:space-between;
font-size:20px;
}

.controls{
background:#fff;
padding:10px;
}

.tableWrap{
flex:1;
overflow:auto;
background:#fff;
}

footer{
background:#ffe89a;
padding:8px;
font-weight:bold;
}

table{
width:100%;
border-collapse:collapse;
}

th,td{
border:1px solid #ccc;
padding:6px;
text-align:center;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
<div class="card">
<h2>üîê Attendance Login</h2>
<input id="u" placeholder="Username">
<input id="p" type="password" placeholder="Password">
<button onclick="login()">Login</button>
<br><br>
<button onclick="alert('User: Ravi\nPass: Ravi123')">üîí Secret</button>
</div>
</div>

<!-- APP -->
<div id="app">

<header>
Attendance MASTER
<button onclick="logout()">Logout</button>
</header>

<div class="controls">
<input type="date" id="date">
<input type="time" id="in">
<input type="time" id="out">
<input id="post" placeholder="Post">
<button onclick="save()">Save</button>
<input id="search" placeholder="Search" oninput="render()">
</div>

<div class="tableWrap">
<table>
<thead>
<tr>
<th>Date</th>
<th>In</th>
<th>Out</th>
<th>Hours</th>
<th>Post</th>
<th>Delete</th>
</tr>
</thead>
<tbody id="tbody"></tbody>
</table>
</div>

<footer>
Total Duty: <span id="duty">0</span> |
Total Hours: <span id="hours">0</span>
</footer>

</div>

<script>

let data=[];
let editIndex=null;

/* AUTO LOGIN */
if(localStorage.getItem("login")=="yes"){
showApp();
}

/* LOGIN */
function login(){
if(u.value==="Ravi" && p.value==="Ravi123"){
localStorage.setItem("login","yes");
showApp();
}else{
alert("Wrong username or password");
}
}

/* LOGOUT */
function logout(){
localStorage.removeItem("login");
location.reload();
}

function showApp(){
login.style.display="none";
app.style.display="flex";
render();
}

/* SAVE */
function save(){
let d=date.value;
let i=in.value;
let o=out.value;
let p=post.value;

if(!d||!i||!o)return;

let h=((new Date("1970-01-01T"+o)-new Date("1970-01-01T"+i))/3600000);
if(h<0)h+=24;

data.push({d,i,o,h,p});
localStorage.setItem("attendance",JSON.stringify(data));

date.value=in.value=out.value=post.value="";
render();
}

/* LOAD */
data=JSON.parse(localStorage.getItem("attendance")||"[]");

/* DELETE */
function del(i){
if(confirm("Delete?")){
data.splice(i,1);
localStorage.setItem("attendance",JSON.stringify(data));
render();
}
}

/* RENDER */
function render(){

let body="";
let tH=0,tD=0;

let s=search.value.toLowerCase();

data
.filter(r=>r.p.toLowerCase().includes(s))
.sort((a,b)=>a.d.localeCompare(b.d))
.forEach((r,i)=>{

tH+=r.h;
tD++;

body+=`
<tr>
<td>${r.d}</td>
<td>${r.i}</td>
<td>${r.o}</td>
<td>${r.h.toFixed(2)}</td>
<td>${r.p}</td>
<td><button onclick="del(${i})">‚ùå</button></td>
</tr>`;
});

tbody.innerHTML=body;
duty.innerText=tD;
hours.innerText=tH.toFixed(2);
}

</script>

</body>
</html>
