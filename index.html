<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Attendance Master</title>

<style>
body{
margin:0;
font-family:Arial;
}

/* LOGIN */
#login{
height:100vh;
display:flex;
align-items:center;
justify-content:center;
background:linear-gradient(135deg,#6c63ff,#8e7bff);
}

.card{
background:#fff;
padding:40px;
border-radius:18px;
width:360px;
text-align:center;
box-shadow:0 10px 30px rgba(0,0,0,.3);
}

.card input{
width:90%;
padding:10px;
margin:8px 0;
}

button{padding:8px 15px;margin:5px;cursor:pointer}

/* APP */
#app{display:none;height:100vh;flex-direction:column}

header{
background:#fff;
padding:8px;
box-shadow:0 2px 5px #ccc;
position:sticky;
top:0;
}

.tableWrap{flex:1;overflow:auto}

table{
width:100%;
border-collapse:collapse;
}

th,td{
border:1px solid #ccc;
padding:6px;
text-align:center;
}

th{background:#ffdede}

footer{
background:#ffe8a3;
padding:8px;
font-weight:bold;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
<div class="card">
<h2>üëÜ Attendance Login</h2>

<input id="u" placeholder="User">
<input id="p" type="password" placeholder="Password">

<button onclick="doLogin()">Login</button>
<br>
<small onclick="secret()">üîí Secret</small>
</div>
</div>


<!-- APP -->
<div id="app">

<header>
Date <input type="date" id="d">
In <input type="time" id="i">
Out <input type="time" id="o">
Post <input id="post">

<button onclick="save()">Save</button>
<button onclick="logout()" style="background:red;color:#fff">Logout</button>
</header>

<div class="tableWrap">
<table>
<thead>
<tr>
<th>Date</th>
<th>In</th>
<th>Out</th>
<th>Hours</th>
<th>Post</th>
<th>Delete</th>
</tr>
</thead>
<tbody id="tb"></tbody>
</table>
</div>

<footer id="foot"></footer>

</div>


<script>

/* LOGIN */
function doLogin(){
if(u.value=="9823087" && p.value=="7284"){
localStorage.setItem("ok","1");
start();
}else alert("Wrong Login");
}

function secret(){
var y=prompt("Year?");
if(y=="1995") alert("User: 9823087\nPass: 7284");
}

function logout(){
localStorage.removeItem("ok");
location.reload();
}

if(localStorage.getItem("ok")) start();

function start(){
login.style.display="none";
app.style.display="flex";
render();
}


/* DATA */
var data = JSON.parse(localStorage.getItem("data")||"[]");

function saveData(){
localStorage.setItem("data",JSON.stringify(data));
}

function calc(a,b){
var s=new Date("2020-01-01 "+a);
var e=new Date("2020-01-01 "+b);
if(e<s)e.setDate(e.getDate()+1);
return ((e-s)/3600000).toFixed(2);
}

function save(){
if(!d.value)return;

data.push({
date:d.value,
in:i.value,
out:o.value,
post:post.value
});

saveData();
render();
}

function del(x){
data.splice(x,1);
saveData();
render();
}

function render(){

tb.innerHTML="";
var total=0;

data.sort((a,b)=>a.date.localeCompare(b.date));

data.forEach((r,idx)=>{

var h=calc(r.in,r.out);
total+=+h;

tb.innerHTML+=`
<tr>
<td>${r.date}</td>
<td>${r.in}</td>
<td>${r.out}</td>
<td>${h}</td>
<td>${r.post}</td>
<td><button onclick="del(${idx})">‚ùå</button></td>
</tr>`;
});

foot.innerText="Total Duty: "+data.length+" | Hours: "+total.toFixed(2);
}

</script>

</body>
</html>
